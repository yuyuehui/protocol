// Copyright © 2023 OpenIM. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

syntax = "proto3";
package openim.sdkws;

import "wrapperspb/wrapperspb.proto";

option go_package = "github.com/openimsdk/protocol/sdkws";

////////////////////////////////base///////////////////////////////

message GroupInfo {
  string groupID = 1;
  string groupName = 2;
  string notification = 3;
  string introduction = 4;
  string faceURL = 5;
  string ownerUserID = 6;
  int64 createTime = 7;
  uint32 memberCount = 8;
  string ex = 9;
  int32 status = 10;
  string creatorUserID = 11;
  int32 groupType = 12;
  int32 needVerification = 13;
  int32 lookMemberInfo = 14;
  int32 applyMemberFriend = 15;
  int64 notificationUpdateTime = 16;
  string notificationUserID = 17;
}

message GroupInfoForSet {
  string groupID = 1;
  string groupName = 2;
  string notification = 3;
  string introduction = 4;
  string faceURL = 5;
  openim.protobuf.StringValue ex = 6;
  openim.protobuf.Int32Value needVerification = 7;
  openim.protobuf.Int32Value lookMemberInfo = 8;
  openim.protobuf.Int32Value applyMemberFriend = 9;
}

message GroupMemberFullInfo {
  string groupID = 1;
  string userID = 2;
  int32 roleLevel = 3;
  int64 joinTime = 4;
  string nickname = 5;
  string faceURL = 6;
  int32 appMangerLevel = 7; //if >0
  int32 joinSource = 8;
  string operatorUserID = 9;
  string ex = 10;
  int64 muteEndTime = 11;
  string inviterUserID = 12;
  string pinyin = 13; // 用户拼音字段，用于拼音搜索
}

message PublicUserInfo {
  string userID = 1;
  string nickname = 2;
  string faceURL = 3;
  string ex = 4;
}

message UserInfo {
  string userID = 1;
  string nickname = 2;
  string faceURL = 3;
  string ex = 4;
  int64 createTime = 5;
  int32 appMangerLevel = 6;
  int32 globalRecvMsgOpt = 7;
  string pinyin = 8;
  string pinyinInitials = 27;  // 拼音首字母，用于首字母搜索（如 "limingyue" -> "lmy"）
  string status = 9;
  string signature = 10;  // 用户签名
  repeated PlatformDetail onlineStatus = 11; // 平台详细状态列表（包含平台ID和在线状态）
  string jobName = 12;   // 职位名称
  // OA/组织定位字段
  int32 companyID = 13;  // 企业ID
  int32 departmentID = 14;  // 部门ID
  repeated int32 deptPathIDs = 15;  // 部门路径ID数组（从根部门到当前部门的路径，包含根0）
  repeated string deptPathNames = 16;  // 部门路径名称数组（与deptPathIDs一一对应）
  int32 jobTitleID = 17;  // OA职位ID
  // 个人资料字段（不再放入 Ex）
  string areaCode = 18;  // 国家/地区码（如 +86）
  string phoneNumber = 19;  // 手机号
  string email = 20;  // 邮箱
  int32 gender = 21;  // 性别：0=未知/保密，1=男，2=女
  int64 birth = 22;  // 生日时间戳
  string departmentName = 23;  // 部门名称（通常是直属部门名）
  string deptAllName = 24;  // 部门全路径名称
  string jobTitle = 25;  // OA 口径职位
  string workCode = 26;  // 工号
}

// PlatformDetail 平台详细状态信息（与 user.proto 中的 platformDetail 保持一致）
message PlatformDetail {
  int32 platformID = 1;  // 平台ID
  int32 status = 2;      // 该平台的状态：0=离线, 1=在线, 2=离开
}

message UserInfoWithEx {
  string userID = 1;
  openim.protobuf.StringValue nickname = 2;
  openim.protobuf.StringValue faceURL = 3;
  openim.protobuf.StringValue ex = 4;
  openim.protobuf.Int32Value globalRecvMsgOpt = 7;
  openim.protobuf.StringValue pinyin = 8;
  openim.protobuf.StringValue pinyinInitials = 27;  // 拼音首字母，用于首字母搜索（如 "limingyue" -> "lmy"）
  openim.protobuf.StringValue status = 9;
  openim.protobuf.StringValue signature = 10;  // 用户签名
}

message FriendInfo {
  string ownerUserID = 1;
  string remark = 2;
  int64 createTime = 3;
  UserInfo friendUser = 4;
  int32 addSource = 5;
  string operatorUserID = 6;
  string ex = 7;
  bool isPinned = 8;
}

message BlackInfo {
  string ownerUserID = 1;
  int64 createTime = 2;
  PublicUserInfo blackUserInfo = 3;
  int32 addSource = 4;
  string operatorUserID = 5;
  string ex = 6;
}

message GroupRequest {
  PublicUserInfo userInfo = 1;
  GroupInfo groupInfo = 2;
  int32 handleResult = 3;
  string reqMsg = 4;
  string handleMsg = 5;
  int64 reqTime = 6;
  string handleUserID = 7;
  int64 handleTime = 8;
  string ex = 9;
  int32 joinSource = 10;
  string inviterUserID = 11;
}

message FriendRequest {
  string fromUserID = 1;
  string fromNickname = 2;
  string fromFaceURL = 3;
  string toUserID = 4;
  string toNickname = 5;
  string toFaceURL = 6;
  int32 handleResult = 7;
  string reqMsg = 8;
  int64 createTime = 9;
  string handlerUserID = 10;
  string handleMsg = 11;
  int64 handleTime = 12;
  string ex = 13;
}

///////////////////////////////////base end/////////////////////////////////////
enum PullOrder {
  PullOrderAsc = 0;
  PullOrderDesc = 1;
}
message PullMessageBySeqsReq {
  string userID = 1;
  repeated SeqRange seqRanges = 2;
  PullOrder order = 3;
}

message SeqRange {
  string conversationID = 1;
  int64 begin = 2;
  int64 end = 3;
  int64 num = 4;
}

message PullMsgs {
  repeated MsgData Msgs = 1;
  bool isEnd = 2;
  int64 endSeq = 3;
}

message PullMessageBySeqsResp {
  map<string, PullMsgs> msgs = 1;
  map<string, PullMsgs> notificationMsgs = 2;
}

message GetMaxSeqReq {
  string userID = 1;
}

message GetMaxSeqResp {
  map<string, int64> maxSeqs = 1;
  map<string, int64> minSeqs = 2;
}

message UserSendMsgResp {
  string serverMsgID = 1;
  string clientMsgID = 2;
  int64 sendTime = 3;
}

message MsgData {
  string sendID = 1;
  string recvID = 2;
  string groupID = 3;
  string clientMsgID = 4;
  string serverMsgID = 5;
  int32 senderPlatformID = 6;
  string senderNickname = 7;
  string senderFaceURL = 8;
  int32 sessionType = 9;
  int32 msgFrom = 10;
  int32 contentType = 11;
  bytes content = 12;
  int64 seq = 14;
  int64 sendTime = 15;
  int64 createTime = 16;
  int32 status = 17;
  bool isRead = 18;
  map<string, bool> options = 19;
  OfflinePushInfo offlinePushInfo = 20;
  repeated string atUserIDList = 21;
  string attachedInfo = 22;
  string ex = 23;
  LikeInfo likeInfo = 24;
  MarkInfo markInfo = 25;         // 标记信息
}

// 点赞信息
message LikeInfo {
  int64 like_count = 1;
  repeated LikeUser like_users = 2;
}

// 点赞用户信息
message LikeUser {
  string user_id = 1;
  string emojiInfo = 2;
  int64 like_time = 3;
  string nickname = 4;
  string face_url = 5;
}

// 点赞消息提示
message LikeMsgTips {
  string likerUserID = 1;      
  string clientMsgID = 2;   
  int64 likeTime = 3;          
  int64 seq = 4;               
  int32 sessionType = 5;      
  string conversationID = 6;   
  string emojiInfo = 7;        
  int64 likeCount = 8;     
  string LikerNickname = 9;
  string RecvID = 10;
  string LikerFaceURL = 11;
}

// 标记信息结构（存储在消息的 MsgData 中）
message MarkInfo {
  bool isMarked = 1;              // 是否已标记
  string markerUserID = 2;        // 标记人用户ID
  string markerNickname = 3;      // 标记人昵称
  int64 markTime = 4;             // 标记时间（毫秒时间戳）
}

// 消息标记通知提示
message MarkMsgTips {
  string markerUserID = 1;        // 标记人用户ID
  string clientMsgID = 2;         // 客户端消息ID
  int64 markTime = 3;             // 标记时间
  int64 seq = 4;                  // 消息序号
  int32 sessionType = 5;          // 会话类型
  string conversationID = 6;      // 会话ID
  string markerNickname = 7;      // 标记人昵称
  string recvID = 8;              // 接收者ID
  bool isMarked = 9;              // true=标记, false=取消标记
}

message PushMessages {
  map<string, PullMsgs> msgs = 1;
  map<string, PullMsgs> notificationMsgs = 2;
}
message OfflinePushInfo {
  string title = 1;
  string desc = 2;
  string ex = 3;
  string iOSPushSound = 4;
  bool iOSBadgeCount = 5;
  string signalInfo = 6;
}

message TipsComm {
  bytes detail = 1;
  string defaultTips = 2;
  string jsonDetail = 3;
}

//////////////////////group/////////////////////

//	OnGroupCreated()
message GroupCreatedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  repeated GroupMemberFullInfo memberList = 3;
  int64 operationTime = 4;
  GroupMemberFullInfo groupOwnerUser = 5;
  uint64 groupMemberVersion = 6;
  string groupMemberVersionID = 7;
}

//	OnGroupInfoSet()
message GroupInfoSetTips {
  GroupMemberFullInfo opUser = 1; //who do this
  int64 muteTime = 2;
  GroupInfo group = 3;
  uint64 groupMemberVersion = 4;
  string groupMemberVersionID = 5;
}

message GroupInfoSetNameTips {
  GroupMemberFullInfo opUser = 1; //who do this
  GroupInfo group = 2;
  uint64 groupMemberVersion = 3;
  string groupMemberVersionID = 4;
}

message GroupInfoSetAnnouncementTips {
  GroupMemberFullInfo opUser = 1; //who do this
  GroupInfo group = 2;
  uint64 groupMemberVersion = 3;
  string groupMemberVersionID = 4;
}

//	OnJoinGroupApplication()
message JoinGroupApplicationTips {
  GroupInfo group = 1;
  PublicUserInfo applicant = 2;
  string reqMsg = 3;
  string uuid = 4;
  GroupRequest request = 5;
}

//	OnQuitGroup()
//Actively leave the group
message MemberQuitTips {
  GroupInfo group = 1;
  GroupMemberFullInfo quitUser = 2;
  int64 operationTime = 3;
  uint64 groupMemberVersion = 4;
  string groupMemberVersionID = 5;
}

//	OnApplicationGroupAccepted()
message GroupApplicationAcceptedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  string handleMsg = 4;
  int32 receiverAs = 5; // admin(==1) or applicant(==0)
  string uuid = 6;
  GroupRequest request = 7;
}

//	OnApplicationGroupRejected()
message GroupApplicationRejectedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  string handleMsg = 4;
  int32 receiverAs = 5; // admin(==1) or applicant(==0)
  string uuid = 6;
  GroupRequest request = 7;
}

//	OnTransferGroupOwner()
message GroupOwnerTransferredTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  GroupMemberFullInfo newGroupOwner = 3;
  string oldGroupOwner = 4;
  int64 operationTime = 5;
  GroupMemberFullInfo oldGroupOwnerInfo = 6;
  uint64 groupMemberVersion = 7;
  string groupMemberVersionID = 8;
}

//	OnMemberKicked()
message MemberKickedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  repeated GroupMemberFullInfo kickedUserList = 3;
  int64 operationTime = 4;
  uint64 groupMemberVersion = 5;
  string groupMemberVersionID = 6;
}

//	OnMemberInvited()
message MemberInvitedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  repeated GroupMemberFullInfo invitedUserList = 3;
  int64 operationTime = 4;
  uint64 groupMemberVersion = 5;
  string groupMemberVersionID = 6;
  GroupMemberFullInfo inviterUser = 7;
}

//Actively join the group
message MemberEnterTips {
  GroupInfo group = 1;
  GroupMemberFullInfo entrantUser = 2;
  int64 operationTime = 3;
  uint64 groupMemberVersion = 5;
  string groupMemberVersionID = 6;
}

message GroupDismissedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  int64 operationTime = 3;
}

message GroupMemberMutedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  int64 operationTime = 3;
  GroupMemberFullInfo mutedUser = 4;
  uint32 mutedSeconds = 5;
  uint64 groupMemberVersion = 6;
  string groupMemberVersionID = 7;
}

message GroupMemberCancelMutedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  int64 operationTime = 3;
  GroupMemberFullInfo mutedUser = 4;
  uint64 groupMemberVersion = 5;
  string groupMemberVersionID = 6;
}

message GroupMutedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  int64 operationTime = 3;
  uint64 groupMemberVersion = 4;
  string groupMemberVersionID = 5;
}

message GroupCancelMutedTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  int64 operationTime = 3;
  uint64 groupMemberVersion = 4;
  string groupMemberVersionID = 5;
}

message GroupMemberInfoSetTips {
  GroupInfo group = 1;
  GroupMemberFullInfo opUser = 2;
  int64 operationTime = 3;
  GroupMemberFullInfo changedUser = 4;
  uint64 groupMemberVersion = 5;
  string groupMemberVersionID = 6;
  uint64 groupSortVersion = 7;
}

//////////////////////friend/////////////////////

message FriendApplication {
  int64 addTime = 1;
  string addSource = 2;
  string addWording = 3;
}

message FromToUserID {
  string fromUserID = 1;
  string toUserID = 2;
}

//FromUserID apply to add ToUserID
message FriendApplicationTips {
  FromToUserID fromToUserID = 1; //from: initiator; to: receiver
  FriendRequest request = 2;
}

//FromUserID accept or reject ToUserID
message FriendApplicationApprovedTips {
  FromToUserID fromToUserID = 1; //from: the person who agrees; to: the person who initiates the request
  string handleMsg = 2;
  uint64 friendVersion = 3;
  string friendVersionID = 4;
  FriendRequest request = 5;
}

//FromUserID accept or reject ToUserID
message FriendApplicationRejectedTips {
  FromToUserID fromToUserID = 1; //from: rejecter; to: request initiator
  string handleMsg = 2;
  FriendRequest request = 3;
}

// FromUserID  Added a friend ToUserID
message FriendAddedTips {
  FriendInfo friend = 1;
  int64 operationTime = 2;
  PublicUserInfo opUser = 3; //who do this
  uint64 friendVersion = 4;
  string friendVersionID = 5;
}

// FromUserID  deleted a friend ToUserID
message FriendDeletedTips {
  FromToUserID fromToUserID = 1; //from：owner； to：friend
  uint64 friendVersion = 2;
  string friendVersionID = 3;
}

message BlackAddedTips {
  FromToUserID fromToUserID = 1; //from：owner； to：black
}

message BlackDeletedTips {
  FromToUserID fromToUserID = 1; //from：owner； to：black
}

message FriendInfoChangedTips {
  FromToUserID fromToUserID = 1; //from：changed； to：friend
  uint64 friendVersion = 2;
  string friendVersionID = 3;
  uint64 friendSortVersion = 4;
}

//////////////////////user/////////////////////
message UserInfoUpdatedTips {
  string userID = 1;
}

message UserStatusChangeTips {
  string fromUserID = 1;
  string toUserID = 2;
  int32 status = 3;
  int32 platformID = 4;
}
message UserCommandAddTips {
  string fromUserID = 1;
  string toUserID = 2;
}
message UserCommandUpdateTips {
  string fromUserID = 1;
  string toUserID = 2;
}
message UserCommandDeleteTips {
  string fromUserID = 1;
  string toUserID = 2;
}

message UserEmojiAddTips {
  string fromUserID = 1;
  string toUserID = 2;
}

message UserEmojiDeleteTips {
  string fromUserID = 1;
  string toUserID = 2;
}

// 快捷回复刷新完成通知（常用回复统计完成后发送）
message UserQuickReplyUpdateTips {
  string fromUserID = 1;
  string toUserID = 2;
  int64 refreshTime = 3;  // 刷新时间
}

// AI快捷回复更新通知（AI生成完成后发送）
message UserAIQuickReplyUpdateTips {
  string fromUserID = 1;
  string toUserID = 2;
  int64 updateTime = 3;  // 更新时间
}

// 快捷回复新增通知
message UserQuickReplyAddTips {
  string fromUserID = 1;
  string toUserID = 2;
  string replyID = 3;     // 回复ID
  string content = 4;     // 回复内容
  int32 replyType = 5;    // 回复类型
}

// 快捷回复删除通知
message UserQuickReplyDeleteTips {
  string fromUserID = 1;
  string toUserID = 2;
  string replyID = 3;     // 回复ID
}

// 快捷回复修改通知
message UserQuickReplyModifyTips {
  string fromUserID = 1;
  string toUserID = 2;
  string replyID = 3;     // 回复ID
  string content = 4;     // 回复内容
}

// 快捷回复置顶/取消置顶通知
message UserQuickReplyPinTips {
  string fromUserID = 1;
  string toUserID = 2;
  string replyID = 3;     // 回复ID
  bool isPinned = 4;      // 是否置顶
  int64 pinTime = 5;      // 置顶时间
}

// 智能总结记录新增通知（通知群成员或单聊对方）
message SummaryRecordAddTips {
  string operatorUserID = 1;     // 操作者用户ID（创建总结的人）
  string conversationID = 2;     // 会话ID
  int32 conversationType = 3;    // 会话类型：1=单聊，2=群聊
  string summaryID = 4;          // 总结记录ID
  string title = 5;              // 总结标题
  string overview = 6;           // 总结概述
  int64 createTime = 7;          // 创建时间
  string creatorNickname = 8;    // 创建者昵称
  string creatorFaceURL = 9;     // 创建者头像
  string contents = 10;          // 用户输入的总结请求
  int32 summaryType = 11;        // 总结类型：1=自动生成，2=手动生成
  string timeDescription = 12;   // 时间范围描述
}

// 智能总结记录删除通知
message SummaryRecordDeleteTips {
  string operatorUserID = 1;     // 操作者用户ID
  string conversationID = 2;     // 会话ID
  int32 conversationType = 3;    // 会话类型
  string summaryID = 4;          // 被删除的总结记录ID
}

// 智能总结记录收藏状态变更通知
message SummaryRecordFavoriteTips {
  string operatorUserID = 1;     // 操作者用户ID
  string summaryID = 2;          // 总结记录ID
  bool isFavorite = 3;           // 是否收藏
}

// 智能总结记录发布通知（多端同步）
message SummaryRecordPublishTips {
  string operatorUserID = 1;     // 操作者用户ID
  string summaryID = 2;          // 总结记录ID
}

//////////////////////schedule/////////////////////
// 日程通知（统一通知，通过action字段区分操作类型，多端同步）
// action: "created"=创建, "updated"=更新, "deleted"=删除, "shared"=分享, "unshared"=取消分享, "accepted"=接受, "rejected"=拒绝
// ScheduleNotificationRepeatInfo 重复规则（用于通知）
message ScheduleNotificationRepeatInfo {
  int64 endDate = 1;                    // 重复结束日期（时间戳，与repeatTimes二选一，都不设置表示永不结束）
  int32 repeatTimes = 2;                // 重复次数（与endDate二选一，都不设置表示永不结束）
  string repeatType = 3;                // 重复类型：daily/weekly/monthly/yearly
  string unitType = 4;                  // 单位类型：day/weekday/week/month/year
  int32 interval = 5;                   // 重复间隔（如每2周、每3个月）
  repeated int32 repeatDaysOfWeek = 6;   // 每周重复的星期几（仅当repeatType=weekly时使用，可多选，0=周日，1=周一，...）
  repeated int32 repeatDaysOfMonth = 7;  // 每月重复的具体日期（1-31，仅当repeatType=monthly时使用，可多选）
  int32 repeatMonth = 8;                // 按年重复时的月份（1-12，仅当repeatType=yearly时使用）
  int32 repeatDayOfMonth = 9;           // 按年重复时的日期（1-31，仅当repeatType=yearly时使用）
}

// ScheduleNotificationReminderInfo 提醒信息（用于通知，已废弃，使用 reminders 数组代替）
// message ScheduleNotificationReminderInfo {
//   int32 reminderType = 1;               // 提醒类型：0=开始时 1=5分钟前 2=15分钟前 3=1小时前 4=1天前 5=自定义
//   int64 reminderTime = 2;              // 提醒时间（时间戳，自定义时使用）
//   bool notified = 3;                   // 是否已通知
// }

// ScheduleNotificationAttendeeInfo 参与者信息（用于通知）
message ScheduleNotificationAttendeeInfo {
  string userID = 1;                    // 用户ID
  string nickname = 2;                  // 用户昵称
  string faceURL = 3;                   // 头像URL
  int32 status = 4;                     // 状态：0=待确认 1=已接受 2=已拒绝
  int32 permission = 5;                 // 权限：0=仅查看 1=可编辑
  int64 replyTime = 6;                  // 回复时间（时间戳）
}

// ScheduleNotificationMeetingSettings 会议设置信息（用于通知）
message ScheduleNotificationMeetingSettings {
  bool enablePassword = 1;                    // 是否启用入会密码
  string password = 2;                        // 入会密码（4-6位数字）
  bool autoTranscribe = 3;                     // 自动开启文字转写
  bool enableWaitingRoom = 4;                 // 开启等候室
  bool allowMemberJoinBeforeHost = 5;          // 允许成员在主持人进会前加入
  bool enableScreenShareWatermark = 6;         // 开启屏幕共享水印
  int32 watermarkType = 7;                     // 水印类型：0=单排水印 1=多排水印
  bool allowMemberViewMinutes = 8;             // 允许成员查看会议纪要文档
  bool allowMultiDeviceJoin = 9;                // 允许成员使用多个设备入会
  int32 callReminder = 10;                     // 会议开始时来电提醒：0=不提醒 1=所有成员 2=指定成员 3=仅主持人
  repeated string callReminderUserIDs = 11;      // 指定成员列表（callReminder为2时使用）
  int32 muteOnJoin = 12;                       // 成员入会时静音：0=关闭 1=开启 2=超过6人后自动开启
}

message ScheduleNotificationTips {
  string operatorUserID = 1;     // 操作者用户ID
  string scheduleID = 2;          // 日程ID
  string action = 3;              // 操作类型：created/updated/deleted/shared/unshared/accepted/rejected
  int64 timestamp = 4;            // 操作时间（时间戳）
  // 以下字段根据action类型选择性使用
  repeated string shareToUserIDs = 5;     // 分享操作：被分享的用户ID列表
  repeated string unshareFromUserIDs = 6; // 取消分享操作：取消分享的用户ID列表
  string creatorUserID = 7;               // 接受/拒绝操作：创建者用户ID
  
  // 完整的日程信息字段（可选，deleted操作时为空）
  optional string creatorNickname = 8;     // 创建者昵称
  optional string status = 9;             // 状态：pending/accepted/rejected/cancelled/completed
  optional int64 createTime = 10;         // 创建时间（时间戳）
  optional string title = 11;             // 日程标题
  optional int64 startTime = 12;          // 开始时间（时间戳）
  optional int64 endTime = 13;            // 结束时间（时间戳）
  optional string location = 14;           // 地点
  optional string roomID = 15;             // 会议室ID
  optional string description = 16;        // 描述/备注
  optional string timeZone = 17;           // 时区
  optional int32 visibility = 18;         // 可见性：1=个人 2=团队 3=公开
  optional bool allDay = 19;               // 是否全天
  repeated string attachmentURLs = 20;     // 附件URL列表
  optional string scheduleGroupID = 21;     // 所属日程分组ID
  optional bool allowMemberJoin = 22;      // 允许成员主动加入
  optional bool notifyByEmail = 23;        // 同时通过邮件通知参与人
  optional int32 type = 24;               // 日程类型：0=日程 1=会议
  optional ScheduleNotificationMeetingSettings meetingSettings = 25; // 会议设置（仅当type为MEETING时有效）
  optional bool isTemporary = 26;         // 是否是临时会议（仅当type为MEETING时有效）
  optional string meetingMinutesID = 27;   // 会议纪要文档ID
  optional ScheduleNotificationRepeatInfo repeatInfo = 28; // 重复规则
  repeated ScheduleNotificationAttendeeInfo attendees = 29; // 参与者列表
  repeated int32 reminders = 30; // 提醒类型列表（可多选）：0=开始时 1=5分钟前 2=15分钟前 3=1小时前 4=1天前
}

//////////////////////conversation/////////////////////
message ConversationUpdateTips {
  string userID = 1;
  repeated string conversationIDList = 2;
}

message ConversationSetPrivateTips {
  string recvID = 1;
  string sendID = 2;
  bool isPrivate = 3;
  string conversationID = 4;
}

message ConversationHasReadTips {
  string userID = 1;
  string conversationID = 2;
  int64 hasReadSeq = 3;
  int64 unreadCountTime = 4;
}

message NotificationElem {
  string detail = 1;
}

////////////////////message///////////////////////
message seqs {
  repeated int64 seqs = 1;
}

message DeleteMessageTips {
  string opUserID = 1;
  string userID = 2;
  repeated int64 seqs = 3;
}

message RevokeMsgTips {
  string revokerUserID = 1;
  string clientMsgID = 2;
  int64 revokeTime = 3;
  int32 sesstionType = 5;
  int64 seq = 6;
  string conversationID = 7;
  bool isAdminRevoke = 8;
}

message MessageRevokedContent {
  string revokerID = 1;
  int32 revokerRole = 2;
  string clientMsgID = 3;
  string revokerNickname = 4;
  int64 revokeTime = 5;
  int64 sourceMessageSendTime = 6;
  string sourceMessageSendID = 7;
  string sourceMessageSenderNickname = 8;
  int32 sessionType = 10;
  int64 seq = 11;
  string ex = 12;
}

message ClearConversationTips {
  string userID = 1;
  repeated string conversationIDs = 2;
}

message DeleteMsgsTips {
  string userID = 1;
  string conversationID = 2;
  repeated int64 seqs = 3;
}

message MarkAsReadTips {
  string markAsReadUserID = 1;
  string conversationID = 2;
  repeated int64 seqs = 3;
  int64 hasReadSeq = 4;
}

// 群消息已读成员信息
message GroupMsgReadUser {
  string userID = 1;        // 用户ID
  string nickname = 2;      // 昵称
  string faceURL = 3;       // 头像URL
  int64 readTime = 4;       // 已读时间（毫秒时间戳）
  bool isRead = 5;          // 是否已读
  string signature = 6;     // 用户签名
}

message SetAppBackgroundStatusReq {
  string userID = 1;
  bool isBackground = 2;
}

message SetAppBackgroundStatusResp {}
message ProcessUserCommand {
  string userID = 1;
  int32 type = 2;
  int64 createTime = 3;
  string uuid = 4;
  string value = 5;
}

message RequestPagination {
  int32 pageNumber = 1;
  int32 showNumber = 2;
}
message FriendsInfoUpdateTips {
  FromToUserID fromToUserID = 1;
  repeated string friendIDs = 2;
  uint64 friendVersion = 3;
  string friendVersionID = 4;
}

message SubUserOnlineStatusElem {
  string userID = 1;
  repeated int32 onlinePlatformIDs = 2;
  map<int32, int32> platformDetails = 3;  // 平台详细状态 platformID -> status
}

message SubUserOnlineStatusTips {
  repeated SubUserOnlineStatusElem subscribers = 1;
}

message SubUserOnlineStatus {
  repeated string subscribeUserID = 1;
  repeated string unsubscribeUserID = 2;
}

message StreamMsgTips {
  string conversationID = 1;
  string clientMsgID = 2;
  int64 startIndex = 3;
  repeated string packets = 4;
  bool end = 5;
}

message ConversationDeleteTips {
  string userID = 1;
  repeated string conversationIDs = 2;
  bool isHidden = 3;  // 是否隐藏（true=隐藏会话，false=真正删除会话）
}

message ConversationGroupChangeTips {
  string userID = 1;
  string groupID = 2;
  string action = 3;
  string groupName = 4;
  repeated string conversationIDs = 5;
  int64 updateTime = 6;
}

// 日程分组变更通知（多端同步）
// ScheduleGroupNotificationShareInfo 分组共享信息（用于通知）
message ScheduleGroupNotificationShareInfo {
  string userID = 1;         // 用户ID
  int32 permission = 2;      // 权限：1=可查看, 2=可编辑, 3=可管理
  bool onlyBusyFree = 3;     // 是否仅查看闲忙状态
}

message ScheduleGroupChangeTips {
  string userID = 1;                    // 用户ID
  string groupID = 2;                   // 分组ID
  string action = 3;                    // 操作类型: "create"=创建, "update"=更新, "delete"=删除, "sort"=排序, "addSchedule"=添加日程, "removeSchedule"=移除日程
  string groupName = 4;                  // 分组名称（创建/更新时）
  repeated string scheduleIDs = 5;       // 变更的日程ID列表（addSchedule/removeSchedule时返回）
  int64 updateTime = 6;                  // 更新时间
  
  // 完整的日程分组信息字段（可选，delete操作时为空）
  optional string ownerUserID = 7;       // 所有者用户ID
  optional int32 groupType = 8;           // 分组类型：0=系统默认分组（只可能有一个），1=个人/团队，2=订阅公共日历
  optional int32 sortOrder = 9;          // 排序顺序
  optional bool isVisible = 10;          // 是否可见
  optional int64 createTime = 11;        // 创建时间（时间戳）
  optional string ex = 12;                // 扩展字段
  repeated ScheduleGroupNotificationShareInfo shares = 13;  // 共享信息列表（包含权限）
  optional string subscribedPublicCalendarID = 14;  // 订阅的公共日历ID（仅当groupType=2时有效）
}

// 共享者用户信息
message ShareUserInfo {
  string userID = 1;    // 用户ID
  string nickname = 2; // 用户昵称
  string faceURL = 3;  // 用户头像URL
}

// 创建者用户信息（用于日程变更消息）
message CreatorUserInfo {
  string userID = 1;        // 用户ID
  string nickname = 2;      // 用户昵称
  string faceURL = 3;       // 用户头像URL
  string signature = 4;     // 用户签名
  string jobName = 5;       // 职位名称
  string departmentName = 6; // 部门名称
}

// 操作者用户信息（用于日程变更消息）
message ChangeUserInfo {
  string userID = 1;    // 用户ID
  string nickname = 2;  // 用户昵称
  string faceURL = 3;   // 用户头像URL
}

// 日程分组共享通知（当分组被共享给其他人时发送）
message ScheduleGroupShareElem {
  string sharerUserID = 1;      // 共享者用户ID
  string sharerNickname = 2;    // 共享者昵称
  string sharerFaceURL = 3;     // 共享者头像URL
  string groupID = 4;           // 分组ID
  string groupName = 5;         // 分组名称
  int32 permission = 6;         // 被共享者的权限：1=可查看详情, 2=可编辑, 3=可管理
  bool onlyBusyFree = 7;        // 是否仅查看闲忙状态
  int64 timestamp = 8;          // 共享时间戳
  string action = 9;            // 操作类型: "shared"=共享, "permission_updated"=权限更新
  ShareUserInfo shareUser = 10; // 共享者完整信息（用于前端显示共享者头像、昵称等）
}

// 日程变更消息内容（schedule_change，用于 sc_ 通知会话消息）
message ScheduleChangeElem {
  string msgType = 1;        // 消息类型："schedule_change"
  string action = 2;         // 操作类型："created"=创建，"updated"=修改
  optional string changeType = 3;     // 修改类型（仅当 action="updated" 时有效），如"时间"、"地点"、"标题"等
  CreatorUserInfo creator = 4; // 创建者信息
  ChangeUserInfo changeUser = 5; // 操作者信息（用于前端显示修改者头像、昵称等）
  string scheduleID = 6;     // 日程ID
  string title = 7;          // 日程标题
  string subTitle = 8;       // 邀请标题
  int64 startTime = 9;       // 开始时间
  int64 endTime = 10;        // 结束时间
  optional string location = 11;      // 地点
  optional string roomID = 12;        // 会议室ID
  optional string description = 13;   // 描述
  optional string timeZone = 14;      // 时区
  int32 visibility = 15;     // 可见性
  bool allDay = 16;          // 是否全天
  repeated string attachmentURLs = 17; // 附件URL列表
  optional string scheduleGroupID = 18; // 日程分组ID
  bool allowMemberJoin = 19;   // 是否允许成员加入
  bool notifyByEmail = 20;     // 是否邮件通知
  int32 type = 21;            // 日程类型：0=SCHEDULE, 1=MEETING
  bool isTemporary = 22;      // 是否临时日程
  string status = 23;         // 状态
  optional ScheduleNotificationRepeatInfo repeatInfo = 24; // 重复规则
  optional ScheduleNotificationMeetingSettings meetingSettings = 25; // 会议设置
  repeated ScheduleNotificationAttendeeInfo attendees = 26; // 参与者列表
}

// 折叠组统一通知（包含创建、更新、删除、会话移入/移出操作）
message ConversationFoldNotificationTips {
  string userID = 1;                    // 用户ID
  string foldConversationID = 2;        // 折叠会话ID
  string action = 3;                    // 操作类型: "created"=创建, "updated"=更新, "deleted"=删除, "cleared"=清空, "conversation_added"=会话移入, "conversation_removed"=会话移出
  string conversationID = 4;            // 变更的会话ID（会话移入/移出时使用）
  string foldName = 5;                  // 折叠名称（创建/更新时）
  int32 foldType = 6;                   // 折叠类型: 1=普通折叠, 2=通知折叠（创建时）
  string faceURL = 7;                   // 头像URL（更新时）
  string description = 8;               // 描述（更新时）
  int64 timestamp = 9;                  // 时间戳（创建/更新/删除/移入/移出时间）
}

