// Copyright © 2023 OpenIM. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

syntax = "proto3";
package openim.msg;

import "conversation/conversation.proto";
import "sdkws/sdkws.proto";

option go_package = "github.com/openimsdk/protocol/msg";

message MsgDataToMQ {
  string token = 1;
  sdkws.MsgData msgData = 2;
}

message MsgDataToDB {
  sdkws.MsgData msgData = 1;
}

message PushMsgDataToMQ {
  sdkws.MsgData msgData = 1;
  string conversationID = 2;
}

message MsgDataToMongoByMQ {
  int64 lastSeq = 1;
  string conversationID = 2;
  repeated sdkws.MsgData msgData = 3;
}

message GetMaxAndMinSeqReq {
  string UserID = 1;
}
message GetMaxAndMinSeqResp {
  int64 MaxSeq = 1;
  int64 MinSeq = 2;
}

message SendMsgReq {
  sdkws.MsgData msgData = 3;
}

message SendMsgResp {
  string serverMsgID = 1;
  string clientMsgID = 2;
  int64 sendTime = 3;
  sdkws.MsgData modify = 4;
}

message SendSimpleMsgReq {
  sdkws.MsgData msgData = 3;
}

message SendSimpleMsgResp {
  string serverMsgID = 1;
  string clientMsgID = 2;
  int64 sendTime = 3;
  sdkws.MsgData modify = 4;
}


message SetSendMsgStatusReq {
  int32 status = 1;
}

message SetSendMsgStatusResp {}

message GetSendMsgStatusReq {}

message GetSendMsgStatusResp {
  int32 status = 1;
}

message MsgDataToModifyByMQ {
  repeated sdkws.MsgData messages = 1;
  string conversationID = 2;
}

message DelMsgsReq {}

message DelMsgsResp {}

message RevokeMsgReq {
  string conversationID = 1;
  int64 seq = 2;
  string userID = 3;
}

message RevokeMsgResp {}

message MarkMsgsAsReadReq {
  string conversationID = 1;
  repeated int64 seqs = 2;
  string userID = 3;
}

message MarkMsgsAsReadResp {}

message MarkConversationAsReadReq {
  string conversationID = 1;
  string userID = 2;
  int64 hasReadSeq = 3;
  repeated int64 seqs = 4;
}

message MarkConversationAsReadResp {}

message MarkConversationAsUnreadReq {
  string conversationID = 1;
  string userID = 2;
  repeated int64 seqs = 3; // Message sequence numbers to mark as unread
}

message MarkConversationAsUnreadResp {}

message SetConversationHasReadSeqReq {
  string conversationID = 1;
  string userID = 2;
  int64 hasReadSeq = 3;
  bool noNotification = 4;
}

message SetConversationHasReadSeqResp {}

message DeleteSyncOpt {
  bool IsSyncSelf = 3;
  bool IsSyncOther = 4;
}

message ClearConversationsMsgReq {
  repeated string conversationIDs = 1;
  string userID = 2;
  DeleteSyncOpt deleteSyncOpt = 3;
}

message ClearConversationsMsgResp {}

message UserClearAllMsgReq {
  string userID = 1;
  DeleteSyncOpt deleteSyncOpt = 3;
}

message UserClearAllMsgResp {}

message DeleteMsgsReq {
  string conversationID = 1;
  repeated int64 seqs = 2;
  string userID = 3;
  DeleteSyncOpt deleteSyncOpt = 4;
}

message DeleteMsgsResp {}

message DeleteMsgPhysicalReq {
  repeated string conversationIDs = 1;
  int64 timestamp = 2;
}

message DeleteMsgPhysicalResp {}

message DeleteMsgPhysicalBySeqReq {
  string conversationID = 1;
  repeated int64 seqs = 2;
}

message DeleteMsgPhysicalBySeqResp {}

message GetMaxSeqsReq {
  repeated string conversationIDs = 1;
}

message GetHasReadSeqsReq {
  string userID = 1;
  repeated string conversationIDs = 2;
}

message SeqsInfoResp {
  map<string, int64> maxSeqs = 1;
}

message GetMsgByConversationIDsReq {
  repeated string conversationIDs = 1;
  map<string, int64> maxSeqs = 2;
}

message GetMsgByConversationIDsResp {
  map<string, sdkws.MsgData> msgDatas = 1;
}

message GetConversationMaxSeqReq {
  string conversationID = 1;
}

message GetConversationMaxSeqResp {
  int64 maxSeq = 1;
}

message GetConversationsHasReadAndMaxSeqReq {
  string userID = 1;
  repeated string conversationIDs = 2;
  bool returnPinned = 3;
}

message Seqs {
  int64 maxSeq = 1;
  int64 hasReadSeq = 2;
  int64 maxSeqTime = 3;
}

message GetConversationsHasReadAndMaxSeqResp {
  map<string, Seqs> seqs = 1;
  repeated string pinnedConversationIDs = 2;
}

message GetActiveUserReq {
  int64 start = 1;
  int64 end = 2;
  bool ase = 3;
  bool group = 4;
  sdkws.RequestPagination pagination = 5;
}

message ActiveUser {
  sdkws.UserInfo user = 1;
  int64 count = 2;
}

message GetActiveUserResp {
  int64 msgCount = 1;
  int64 userCount = 2;
  map<string, int64> dateCount = 3;
  repeated ActiveUser users = 4;
}

message GetActiveGroupReq {
  int64 start = 1;
  int64 end = 2;
  bool ase = 3;
  sdkws.RequestPagination pagination = 4;
}

message ActiveGroup {
  sdkws.GroupInfo group = 1;
  int64 count = 2;
}

message GetActiveGroupResp {
  int64 msgCount = 1;
  int64 groupCount = 2;
  map<string, int64> dateCount = 3;
  repeated ActiveGroup groups = 4;
}

message SearchMessageReq {
  string sendID = 1; //发送者ID
  string recvID = 2; //接收者ID
  int32 contentType = 3;
  string sendTime = 4;
  int32 sessionType = 5;
  sdkws.RequestPagination pagination = 6;
}

message SearchChatLog {
  ChatLog chatLog = 1;
  bool isRevoked = 2;
}

message SearchedMsgData {
  sdkws.MsgData msgData = 1;
  bool isRevoked = 2;
}

message SearchMessageResp {
  repeated SearchChatLog chatLogs = 1;
  int32 chatLogsNum = 2;
}

message ChatLog {
  string serverMsgID = 1;
  string clientMsgID = 2;
  string sendID = 3;
  string recvID = 4;
  string groupID = 5;
  string recvNickname = 6;
  int32 senderPlatformID = 7;
  string senderNickname = 8;
  string senderFaceURL = 9;
  string groupName = 10;
  int32 sessionType = 11;
  int32 msgFrom = 12;
  int32 contentType = 13;
  string content = 14;
  int32 status = 15;
  int64 sendTime = 16;
  int64 createTime = 17;
  string ex = 18;
  string groupFaceURL = 19;
  uint32 groupMemberCount = 20;
  int64 seq = 21;
  string groupOwner = 22;
  int32 groupType = 23;
}

message batchSendMessageReq {
  repeated string recvIDList = 1;
  sdkws.MsgData msgData = 2;
}

message batchSendMessageResp {}
message GetServerTimeReq {}
message GetServerTimeResp {
  int64 serverTime = 1;
}

message ClearMsgReq {
  repeated conversation.Conversation conversations = 1;
}

message ClearMsgResp {}

message DestructMsgsReq {
  int64 timestamp = 1;
  int32 limit = 2;
}

message DestructMsgsResp {
  int32 count = 1;
}

message SetUserConversationsMinSeqReq {
  repeated string userIDs = 1;
  string conversationID = 2;
  int64 seq = 3;
}

message SetUserConversationsMinSeqResp {}

message ConversationSeqs {
  string conversationID = 2;
  repeated int64 seqs = 3;
}

message GetSeqMessageReq {
  string userID = 1;
  repeated ConversationSeqs conversations = 2;
  sdkws.PullOrder order = 3;
}

message GetSeqMessageResp {
  map<string, sdkws.PullMsgs> msgs = 1;
  map<string, sdkws.PullMsgs> notificationMsgs = 2;
}

message GetActiveConversationReq {
  repeated string conversationIDs = 1;
  int64 limit = 2;
}

message ActiveConversation {
  string conversationID = 1;
  int64 lastTime = 2;
  int64 maxSeq = 3;
}

message GetActiveConversationResp {
  repeated ActiveConversation conversations = 1;
}

message SetUserConversationMaxSeqReq {
  string conversationID = 1;
  repeated string ownerUserID = 2;
  int64 maxSeq = 3;
}
message SetUserConversationMaxSeqResp {}

message SetUserConversationMinSeqReq {
  string conversationID = 1;
  repeated string ownerUserID = 2;
  int64 minSeq = 3;
}
message SetUserConversationMinSeqResp {}

message GetLastMessageSeqByTimeReq {
  string conversationID = 1;
  int64 time = 2;
}

message GetLastMessageSeqByTimeResp {
  int64 seq = 1;
}

message GetLastMessageReq {
  string userID = 1;
  repeated string conversationIDs = 2;
}
message GetLastMessageResp {
  map<string,sdkws.MsgData> msgs = 1;
}

message LikeMsgReq {
  string conversationID = 1;
  int64  seq = 2;
  string expressionContent = 3;
  string userID = 4;
  string nickName = 5;
  string faceUrl = 6;
}

message LikeMsgResp {
  
}

// 收藏消息相关定义
message FavoriteMessage {
  string id = 1;                    // 收藏ID（保留字段，向后兼容）
  string userID = 2;                // 收藏用户ID
  string conversationID = 3;        // 会话ID
  string clientMsgID = 4;            // 客户端消息ID（client_msg_id）
  string serverMsgID = 5;           // 服务端消息ID
  int64 seq = 6;                    // 消息序列号
  string sendID = 7;                // 发送者ID
  string recvID = 8;                // 接收者ID
  string groupID = 9;               // 群ID（群消息时使用）
  string groupName = 10;            // 群名称（群消息时使用）
  string senderNickname = 11;       // 发送者昵称
  string senderFaceURL = 12;        // 发送者头像
  int32 sessionType = 13;           // 会话类型
  int32 contentType = 14;          // 消息类型
  string content = 15;              // 消息内容
  string attachedInfo = 16;         // 附加信息
  int64 sendTime = 17;              // 消息发送时间
  string remark = 18;               // 备注
  int32 favoriteType = 19;         // 收藏类型
  repeated string tags = 20;        // 标签列表
  int64 createTime = 21;            // 创建时间
  int64 updateTime = 22;            // 更新时间
  string favoriteID = 23;           // 收藏唯一ID

}

// AddFavoriteReq 添加收藏请求
message AddFavoriteReq {
  string conversationID = 1;        // 会话ID
  string clientMsgID = 2;            // 客户端消息ID（client_msg_id）
  string content = 3;                // 消息内容
  int32 favoriteType = 4;         // 收藏类型（可选）
  // 消息详情字段（客户端传递）
  string serverMsgID = 5;           // 服务器消息ID
  int64 seq = 6;                    // 消息序列号
  string sendID = 7;                // 发送者ID
  string recvID = 8;                // 接收者ID
  string groupID = 9;               // 群ID（群聊时有值）
  string groupName = 10;            // 群名称
  string senderNickname = 11;       // 发送者昵称
  string senderFaceURL = 12;        // 发送者头像
  int32 sessionType = 13;           // 会话类型
  int32 contentType = 14;           // 内容类型
  string attachedInfo = 16;         // 附加信息
  int64 sendTime = 17;              // 发送时间
  string remark = 18;               // 备注（可选）
}

// AddFavoriteResp 添加收藏响应
message AddFavoriteResp {
  string favoriteID = 1;            // 收藏ID
}

// DeleteFavoriteReq 取消收藏请求
message DeleteFavoriteReq {
  string favoriteID = 1;            // 收藏ID（必填）
}

// DeleteFavoriteResp 取消收藏响应
message DeleteFavoriteResp {
}

// GetFavoriteListReq 获取收藏列表请求
message GetFavoriteListReq {
  int32 favoriteType = 1;            // 收藏类型筛选（0=全部）
  string keyword = 2;                // 关键词搜索（可选）
  int64 startTime = 3;               // 开始时间（毫秒，可选）
  int64 endTime = 4;                 // 结束时间（毫秒，可选）
  int32 offset = 5;                  // 分页偏移量
  int32 count = 6;                   // 每页数量
  int32 sortOrder = 7;               // 排序方式：0=按收藏时间倒序（最新在前），1=按收藏时间正序（最旧在前）
}

// GetFavoriteListResp 获取收藏列表响应
message GetFavoriteListResp {
  repeated FavoriteMessage favorites = 1;  // 收藏列表
  int32 total = 2;                         // 总数
}

// UpdateFavoriteReq 更新收藏请求（更新标签）
message UpdateFavoriteReq {
  string favoriteID = 1;            // 收藏ID
  repeated string tags = 2;         // 标签列表（可选）
}

// UpdateFavoriteResp 更新收藏响应
message UpdateFavoriteResp {
}

// 群消息已读成员信息
message GroupMsgReadUser {
  string userID = 1;        // 用户ID
  string nickname = 2;      // 昵称
  string faceURL = 3;       // 头像URL
  int64 readTime = 4;       // 已读时间（毫秒时间戳）
  bool isRead = 5;          // 是否已读
  string signature = 6;     // 用户签名
}

// 获取群消息已读/未读成员列表请求
message GetGroupMessageReaderListReq {
  string conversationID = 1;  // 会话ID
  int64 seq = 2;              // 消息序列号
  string userID = 3;          // 请求者用户ID（消息发送者）
  int32 filter = 4;           // 过滤类型：0=全部，1=已读，2=未读
  int32 offset = 5;           // 分页偏移量
  int32 count = 6;            // 每页数量
}

// 获取群消息已读/未读成员列表响应
message GetGroupMessageReaderListResp {
  int32 hasReadCount = 1;                   // 已读数量
  int32 unreadCount = 2;                    // 未读数量
  int32 groupMemberCount = 3;               // 群成员总数
  repeated GroupMsgReadUser hasReadList = 4;  // 已读成员列表
  repeated GroupMsgReadUser unreadList = 5;   // 未读成员列表
}

// ==================== 消息标记相关定义 ====================

// 标记消息请求
message MarkMsgReq {
  string conversationID = 1;      // 会话ID
  int64 seq = 2;                  // 消息序列号
  string userID = 3;              // 标记人用户ID
  string nickName = 4;            // 标记人昵称
}

// 标记消息响应
message MarkMsgResp {
  bool success = 1;               // 是否成功
}

// 取消标记消息请求
message UnmarkMsgReq {
  string conversationID = 1;      // 会话ID
  int64 seq = 2;                  // 消息序列号
  string userID = 3;              // 操作人用户ID（用于权限校验）
}

// 取消标记消息响应
message UnmarkMsgResp {
  bool success = 1;               // 是否成功
}

// 搜索标记消息请求
message SearchMarkedMsgReq {
  string conversationID = 1;      // 会话ID（必填）
  string keyword = 2;             // 关键词（搜索消息内容，可选）
  string senderID = 3;            // 发送人ID筛选（可选）
  int64 startTime = 4;            // 开始时间（毫秒，可选）
  int64 endTime = 5;              // 结束时间（毫秒，可选）
  int32 offset = 6;               // 分页偏移量
  int32 count = 7;                // 每页数量
}

// 标记消息详情（用于标记列表展示）
message MarkedMsgDetail {
  string conversationID = 1;      // 会话ID
  int64 seq = 2;                  // 消息序列号
  string clientMsgID = 3;         // 客户端消息ID
  string sendID = 4;              // 发送人ID
  string senderNickname = 5;      // 发送人昵称
  int32 contentType = 6;          // 消息类型
  string content = 7;             // 消息内容
  int64 sendTime = 8;             // 发送时间
  int32 sessionType = 9;          // 会话类型
  string groupID = 10;            // 群ID（群聊时有值）
  string markerUserID = 11;       // 标记人ID
  string markerNickname = 12;     // 标记人昵称
  int64 markTime = 13;            // 标记时间
}

// 搜索标记消息响应
message SearchMarkedMsgResp {
  repeated MarkedMsgDetail markedMsgs = 1;  // 标记消息列表
  int32 total = 2;                          // 总数
}

// 获取会话标记消息列表请求
message GetMarkedMsgListReq {
  string conversationID = 1;      // 会话ID
  int32 offset = 2;               // 分页偏移量
  int32 count = 3;                // 每页数量
}

// 获取会话标记消息列表响应
message GetMarkedMsgListResp {
  repeated MarkedMsgDetail markedMsgs = 1;  // 标记消息列表
  int32 total = 2;                          // 总数
}
// ==================== 智能总结相关定义 ====================

// 总结记录
message SummaryRecord {
  string summaryID = 1;           // 总结ID（唯一标识）
  string userID = 2;              // 创建者用户ID
  string conversationID = 3;      // 会话ID
  int32 conversationType = 4;     // 会话类型
  string showName = 5;            // 会话显示名称
  string faceURL = 6;             // 会话头像
  string title = 7;               // 总结标题
  int32 summaryType = 8;          // 总结类型：1=自动生成，2=手动生成
  int64 startTime = 9;            // 总结的消息开始时间
  int64 endTime = 10;             // 总结的消息结束时间
  string timeDescription = 11;    // 时间描述
  int32 messageCount = 12;        // 消息数量
  int32 conversationCount = 13;   // 会话数量
  string contents = 14;           // 用户输入的总结请求内容
  string overview = 15;           // 总结概述
  string keyPoints = 16;          // 关键点（JSON格式）
  string actionItems = 17;        // 待办事项（JSON格式）
  string statistics = 18;         // 统计信息（JSON格式）
  string creatorNickname = 19;    // 创建者昵称
  string creatorFaceURL = 20;     // 创建者头像
  int64 createTime = 21;          // 创建时间
  int64 updateTime = 22;          // 更新时间
  string ex = 23;                 // 扩展字段
  bool isFavorite = 24;           // 是否收藏
}

// 创建总结记录请求
message CreateSummaryRecordReq {
  string conversationID = 1;      // 会话ID
  int32 conversationType = 2;     // 会话类型
  string showName = 3;            // 会话显示名称
  string faceURL = 4;             // 会话头像
  string title = 5;               // 总结标题
  int32 summaryType = 6;          // 总结类型
  int64 startTime = 7;            // 消息开始时间
  int64 endTime = 8;              // 消息结束时间
  string timeDescription = 9;     // 时间描述
  int32 messageCount = 10;        // 消息数量
  int32 conversationCount = 11;   // 会话数量
  string contents = 12;           // 用户输入的总结请求
  string overview = 13;           // 总结概述
  string keyPoints = 14;          // 关键点（JSON格式）
  string actionItems = 15;        // 待办事项（JSON格式）
  string statistics = 16;         // 统计信息（JSON格式）
  string creatorNickname = 17;    // 创建者昵称
  string creatorFaceURL = 18;     // 创建者头像
  string ex = 19;                 // 扩展字段
}

// 创建总结记录响应
message CreateSummaryRecordResp {
  string summaryID = 1;           // 创建的总结ID
}

// 删除总结记录请求
message DeleteSummaryRecordReq {
  string summaryID = 1;           // 总结ID
  string conversationID = 2;      // 会话ID（用于通知）
}

// 删除总结记录响应
message DeleteSummaryRecordResp {}

// 获取总结记录列表请求
message GetSummaryRecordListReq {
  string conversationID = 1;      // 会话ID（可选，不传则获取所有会话的总结）
  int64 startTime = 2;            // 开始时间（可选）
  int64 endTime = 3;              // 结束时间（可选）
  int32 offset = 4;               // 分页偏移
  int32 count = 5;                // 每页数量
}

// 获取总结记录列表响应
message GetSummaryRecordListResp {
  repeated SummaryRecord records = 1;  // 总结记录列表
  int32 total = 2;                     // 总数
}

// 获取单个总结记录请求
message GetSummaryRecordReq {
  string summaryID = 1;           // 总结ID
}

// 获取单个总结记录响应
message GetSummaryRecordResp {
  SummaryRecord record = 1;       // 总结记录
}

// 设置总结收藏状态请求
message SetSummaryFavoriteReq {
  string summaryID = 1;           // 总结ID
  bool isFavorite = 2;            // 是否收藏
}

// 设置总结收藏状态响应
message SetSummaryFavoriteResp {}

// 同步总结记录请求（用于从服务端同步）
message SyncSummaryRecordsReq {
  string conversationID = 1;      // 会话ID（可选）
  int64 lastSyncTime = 2;         // 上次同步时间
}

// 同步总结记录响应
message SyncSummaryRecordsResp {
  repeated SummaryRecord records = 1;  // 更新的记录
  repeated string deletedIDs = 2;      // 被删除的记录ID
  int64 syncTime = 3;                  // 本次同步时间
}

service msg {
  //获取最小最大seq（包括用户的，以及指定群组的）
  rpc GetMaxSeq(sdkws.GetMaxSeqReq) returns (sdkws.GetMaxSeqResp);
  //获取会话列表的最大seq
  rpc GetMaxSeqs(GetMaxSeqsReq) returns (SeqsInfoResp);
  //获取会话列表已读的最大seq
  rpc GetHasReadSeqs(GetHasReadSeqsReq) returns (SeqsInfoResp);
  //获取最新消息
  rpc GetMsgByConversationIDs(GetMsgByConversationIDsReq) returns (GetMsgByConversationIDsResp);
  rpc GetConversationMaxSeq(GetConversationMaxSeqReq) returns (GetConversationMaxSeqResp);
  //拉取历史消息（包括用户的，以及指定群组的）
  rpc PullMessageBySeqs(sdkws.PullMessageBySeqsReq) returns (sdkws.PullMessageBySeqsResp);
  rpc GetSeqMessage(GetSeqMessageReq) returns (GetSeqMessageResp);
  rpc SearchMessage(SearchMessageReq) returns (SearchMessageResp);
  //发送消息
  rpc SendMsg(SendMsgReq) returns (SendMsgResp);
  //简易发送消息
  rpc SendSimpleMsg(SendSimpleMsgReq) returns (SendSimpleMsgResp);

  rpc SetUserConversationsMinSeq(SetUserConversationsMinSeqReq) returns (SetUserConversationsMinSeqResp);

  // 全量清空指定会话消息 重置min seq 比最大seq大1
  rpc ClearConversationsMsg(ClearConversationsMsgReq) returns (ClearConversationsMsgResp);
  // 删除用户全部消息 重置min seq 比最大seq大1
  rpc UserClearAllMsg(UserClearAllMsgReq) returns (UserClearAllMsgResp);
  // 用户标记删除部分消息by Seq
  rpc DeleteMsgs(DeleteMsgsReq) returns (DeleteMsgsResp);
  // seq物理删除消息
  rpc DeleteMsgPhysicalBySeq(DeleteMsgPhysicalBySeqReq) returns (DeleteMsgPhysicalBySeqResp);
  // 物理删除消息by 时间
  rpc DeleteMsgPhysical(DeleteMsgPhysicalReq) returns (DeleteMsgPhysicalResp);

  //设置消息是否发送成功-针对api发送的消息
  rpc SetSendMsgStatus(SetSendMsgStatusReq) returns (SetSendMsgStatusResp);
  //获取消息发送状态
  rpc GetSendMsgStatus(GetSendMsgStatusReq) returns (GetSendMsgStatusResp);
  rpc RevokeMsg(RevokeMsgReq) returns (RevokeMsgResp);
  // mark as read
  rpc MarkMsgsAsRead(MarkMsgsAsReadReq) returns (MarkMsgsAsReadResp);
  rpc MarkConversationAsRead(MarkConversationAsReadReq) returns (MarkConversationAsReadResp);
  rpc MarkConversationAsUnread(MarkConversationAsUnreadReq) returns (MarkConversationAsUnreadResp);
  rpc SetConversationHasReadSeq(SetConversationHasReadSeqReq) returns (SetConversationHasReadSeqResp);

  rpc GetConversationsHasReadAndMaxSeq(GetConversationsHasReadAndMaxSeqReq) returns (GetConversationsHasReadAndMaxSeqResp);
  rpc GetActiveUser(GetActiveUserReq) returns (GetActiveUserResp);
  rpc GetActiveGroup(GetActiveGroupReq) returns (GetActiveGroupResp);
  rpc GetServerTime(GetServerTimeReq) returns (GetServerTimeResp);

  rpc ClearMsg(ClearMsgReq) returns (ClearMsgResp);
  rpc DestructMsgs(DestructMsgsReq) returns (DestructMsgsResp);

  rpc GetActiveConversation(GetActiveConversationReq) returns (GetActiveConversationResp);
  
  rpc SetUserConversationMaxSeq(SetUserConversationMaxSeqReq) returns (SetUserConversationMaxSeqResp);
  rpc SetUserConversationMinSeq(SetUserConversationMinSeqReq) returns (SetUserConversationMinSeqResp);
  rpc GetLastMessageSeqByTime(GetLastMessageSeqByTimeReq) returns (GetLastMessageSeqByTimeResp);
  rpc GetLastMessage(GetLastMessageReq) returns (GetLastMessageResp);
  rpc LikeMessage(LikeMsgReq) returns (LikeMsgResp);
  rpc UnLikeMessage(LikeMsgReq) returns (LikeMsgResp);
  // 获取群消息已读/未读成员列表
  rpc GetGroupMessageReaderList(GetGroupMessageReaderListReq) returns (GetGroupMessageReaderListResp);
  
  // 收藏消息相关接口
  rpc AddFavorite(AddFavoriteReq) returns (AddFavoriteResp);
  rpc DeleteFavorite(DeleteFavoriteReq) returns (DeleteFavoriteResp);
  rpc GetFavoriteList(GetFavoriteListReq) returns (GetFavoriteListResp);
  rpc UpdateFavorite(UpdateFavoriteReq) returns (UpdateFavoriteResp);
	// 消息标记相关接口
  rpc MarkMessage(MarkMsgReq) returns (MarkMsgResp);
  rpc UnmarkMessage(UnmarkMsgReq) returns (UnmarkMsgResp);
  rpc SearchMarkedMessage(SearchMarkedMsgReq) returns (SearchMarkedMsgResp);
  rpc GetMarkedMessageList(GetMarkedMsgListReq) returns (GetMarkedMsgListResp);
	
  // 智能总结相关接口
  rpc CreateSummaryRecord(CreateSummaryRecordReq) returns (CreateSummaryRecordResp);
  rpc DeleteSummaryRecord(DeleteSummaryRecordReq) returns (DeleteSummaryRecordResp);
  rpc GetSummaryRecordList(GetSummaryRecordListReq) returns (GetSummaryRecordListResp);
  rpc GetSummaryRecord(GetSummaryRecordReq) returns (GetSummaryRecordResp);
  rpc SetSummaryFavorite(SetSummaryFavoriteReq) returns (SetSummaryFavoriteResp);
  rpc SyncSummaryRecords(SyncSummaryRecordsReq) returns (SyncSummaryRecordsResp);
}
